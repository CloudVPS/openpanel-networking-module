# ============================================================================
# OpenPanel Networking.module for controlling network settings.
# Copyright (C) 2008 PanelSix V.O.F.
# ============================================================================
module Networking				< uuid d16089e4-3966-44c0-8b53-03e3fea129a6
								< version 2.0
								< languages en_EN
								< apitype xml
								< getconfig true


# ============================================================================
# CLASSES
# ============================================================================
class Network					< uuid 30691f95-78c2-4fa6-a0c7-6a561e426488
								< version 3
								< indexing manual
								< worldreadable true
								< singleton net
								< shortname network
								< title Network
								< description Network Settings
								< sortindex 80
								< icon network.png
								< explanation network.html
								
								< capabilities admin
								
	bool networking				: Enable Networking
	
	string hostname				: Hostname
								< example host.example.net
	
	bool forward_ipv4			: Forward IPv4
	
	bool forward_ipv6			: Forward IPv6
	
	string gateway				: Gateway
								< regexp [:ipv4:]
								< example 10.1.1.1
								
	string v6gateway			: Gateway IPv6
								< regexp [:ipv6:]
								< example 2001:db8::1


# ----------------------------------------------------------------------------
class Network:Interface			< uuid 22cd5f5a-9aec-434a-b568-fc0fdb0ed959
								< version 3
								< requires Network
								< indexing manual
								< uniquein class
								< dynamic true
								< worldreadable true
								< shortname interface
								< title Network Interface
								< description Network Interface
								< sortindex 95
								
								< capabilities
								
	string id					: Name
								< regexp eth[0-9]:[0-9]*
								< gridwidth 10
								
	string mac					: MAC address
								< flags
								< clihide true
								< gridwidth 38
	
	string address				: IP address
								< regexp [:ipv4:]
								< example 10.1.1.2
								< gridwidth 25
	
	enum netmask				: Netmask
								< regexp [:ipv4:]
								< default 255.255.255.0
								< gridwidth 25
	
	enum type					: Hardware
								< flags
								< default Ethernet
								< gridhide true

# ----------------------------------------------------------------------------
class Network:IPv4Address		< uuid e07052e7-10a3-454b-962e-28ccd6610983
								< version 1
								< requires Network:Interface
								< indexing auto
								< dynamic true
								< worldreadable true
								< shortname ipaddress
								< title IPv4
								< description IPv4 address
								
								< capabilities
								
	string address				: Address
								< regexp [:ipv4:]
								< gridwidth 80
								< textwidth 18
								
	enum netmask				: Mask
								< gridwidth 20
								< textwidth 5


# ----------------------------------------------------------------------------
class Network:IPv6Address		< uuid 21016b00-9800-4363-8b21-cebaf309c082
								< version 1
								< requires Network:Interface
								< indexing manual
								< dynamic true
								< worldreadable true
								< shortname ipaddress
								< title IPv6
								< description IPv6 address
								
								< capabilities
	
	string address				: Address
								< regexp [:ipv4:]
								< gridwidth 80
								< textwidth 24
								
	enum v6netmask				: Mask
								< gridwidth 20
								< textwidth 5

# ============================================================================
# ENUMS
# ============================================================================
enum type
	ethernet					: Ethernet
	
# TODO: fliparound? or how about '/32 : /32 255.255.255.255' so that cli shows /32 and gui shows both
enum netmask
	/32							: /32
	/31							: /31
	/30							: /30
	/29							: /29
	/28							: /28
	/27							: /27
	/26							: /26
	/25							: /25
	/24							: /24
	/23							: /23
	/22							: /22
	/21							: /21
	/20							: /20
	/19							: /19
	/18							: /18
	/17							: /17
	/16							: /16

enum v6netmak
	/128						: /128
	/127						: /127
	/126						: /126
	/125						: /125
	/124						: /124
	/123						: /123
	/122						: /122
	/121						: /121
	/120						: /120
	/119						: /119
	/118						: /118
	/117						: /117
	/116						: /116
	/115						: /115
	/114						: /114
	/113						: /113
	/112						: /112
	/111						: /111
	/110						: /110
	/109						: /109
	/108						: /108
	/107						: /107
	/106						: /106
	/105						: /105
	/104						: /104
	/103						: /103
	/102						: /102
	/101						: /101
	/100						: /100
	/99							: /99
	/98							: /98
	/97							: /97
	/96							: /96
	/95							: /95
	/94							: /94
	/93							: /93
	/92							: /92
	/91							: /91
	/90							: /90
	/89							: /89
	/88							: /88
	/87							: /87
	/86							: /86
	/85							: /85
	/84							: /84
	/83							: /83
	/82							: /82
	/81							: /81
	/80							: /80
	/79							: /79
	/78							: /78
	/77							: /77
	/76							: /76
	/75							: /75
	/74							: /74
	/73							: /73
	/72							: /72
	/71							: /71
	/70							: /70
	/69							: /69
	/68							: /68
	/67							: /67
	/66							: /66
	/65							: /65
	/64							: /64
	/63							: /63
	/62							: /62
	/61							: /61
	/60							: /60
	/59							: /59
	/58							: /58
	/57							: /57
	/56							: /56
	/55							: /55
	/54							: /54
	/53							: /53
	/52							: /52
	/51							: /51
	/50							: /50
	/49							: /49
	/48							: /48
	/47							: /47
	/46							: /46
	/45							: /45
	/44							: /44
	/43							: /43
	/42							: /42
	/41							: /41
	/40							: /40
	/39							: /39
	/38							: /38
	/37							: /37
	/36							: /36
	/35							: /35
	/34							: /34
	/33							: /33
	/32							: /32

# ============================================================================
# AUTHD
# ============================================================================
authd fileops
	match interfaces			: /etc/network
	match hostname				: /etc
	match ifcfg-*				: /etc/sysconfig/network-scripts
	match network				: /etc/sysconfig
	
	
authd services
	service %%NETWORKSVC%%


# ============================================================================
# DISTRO MACROS
# ============================================================================
distro debian
	macro NETWORKSVC			: networking

distro redhat
	macro NETWORKSVC			: network
